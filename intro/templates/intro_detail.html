{% extends 'base.html' %}

{% load staticfiles %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/introduce.css' %}">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">


<style>
  #user-img1 {
    margin-top: 5px;
  }
  #user-img{
    width:80px;
    height:80px;
}
</style>
<div id="my-container">
  {{intro_detail.update_counter_hit}}
  <div class="row">
    <div class="col-lg-9">
      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <!--이미지1-->
            <img id="detail-img" src="{{ intro_detail.img1.url }}">
          </div>
          <div class="carousel-item">
            <!--이미지2-->
            <img id="detail-img" src="{{ intro_detail.img2.url }}">
          </div>
          <div class="carousel-item">
            <!--이미지3-->
            <img id="detail-img" src="{{ intro_detail.img3.url }}">
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      <!--태그-->
      <a id="tag">{{intro_detail.tag}} </a>
      <!--학과명-->
      <h1 id="detail-title">{{intro_detail.dename}}</h1>
      <!--조회수-->
      <span id="detail-text">{{intro_detail.hits}} views</span>
      <div id="contain-right">
        <!--좋아요-->
        <!--
          <img src="{% static 'img/like_btn.png'%}" style="margin-bottom:6px;">
        -->
        {% if user in intro_detail.intro_like_users.all %}
        <a href="{% url 'intro_like' intro_detail.id %}">
          <i class="fa fa-heart fa-2x" style="color:#ed2553;"></i>
        </a>
        {% else %}
        <a href="{% url 'intro_like' intro_detail.id %}">
          <i class="fa fa-heart fa-2x" style="color:#2F2F2F;"></i></a>
        {% endif %}
        <span id="detail-text">{{ intro_detail.intro_like_users.count }}</span>


        <!--
    <a href="#">
      <img id="icon_btn" src="{% static 'img/share_btn.png'%}">
      <span id="detail-text"> SHARE</span>
    </a>
    -->
        <!--공유하기(구현 완료) 소영아 이쁘게 꾸며주시오... -->
        <a id="kakao-link-btn" href="javascript:sendLink()">
          <i class="fa fa-share fa-2x" style="color: #2f2f2f;;"></i>
        </a>
      </div>

      <br>
      <br>
      <hr>
      <br>
      <!--학과별 이미지-->
      <img id="user-img" src="{{ intro_detail.de_logo.url }}">
      <!--학과이름-->
      <span id="intro-card-title">{{intro_detail.dename}} 맛집</span>
      <!--메뉴판 보여주는 버튼-->
      <img src="{%static 'img/menuboard.png'%}" style="margin-right: 10px;  width:50px;" data-toggle="modal" data-target="#menufanModal"></button>
      <!-- Modal -->
      <div class="modal fade" id="menufanModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">{{intro_detail.dename}}</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- 학과 메뉴판 사진 -->
              <img src="{{ intro_detail.menufan.url }}" width="450px">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" data-dismiss="modal">닫기</button>
            </div>
          </div>
        </div>
      </div>
      <!--Modal-->
      <!--지도 보여주는 버튼-->
      <button id="sub_button" class="btn btn-light" data-toggle="modal" data-target="#mapModal">위치보기</button>
      <!-- Modal -->
      <div class="modal fade" id="mapModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">{{intro_detail.dename}}</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- 학과 지도 사진 -->
              <img src="{{ intro_detail.map_img.url }}">\
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" data-dismiss="modal">닫기</button>
            </div>
          </div>
        </div>
      </div>
      <!--Modal-->
      <div class="content-box">
        <div row>
          <div class="col-lg-9">
            <!-- |linebreaks 속성은 줄 바꿈 허용 -->
            <br>
            <h5>{{intro_detail.introduce|linebreaks}}</h5>
            <br>
          </div>
          <hr>
        </div>
      </div>
    </div>
    <!--타학과 7개만 보이게 해주세요-->
    <div id="other" class="col-lg-3" style="padding-left:20px;">
      <h5>다른 학과 구경가기</h5>
      <!--for문은 여기부터-->
      {% for intro in exclude_intro %}
      <a href="{% url 'intro_detail' intro.id %}">
        <div class="card mb-3" style="width: 100%;">
          <div class="row no-gutters">
            <div class="col-md-6">
              <img id="small-img" src="{{ intro.img1.url }}">
            </div>
            <div class="col-md-6" style="padding-left: 20px;">
              <img id="user-img1" src="{{ intro.de_logo.url }}">
              <span>{{intro.dename}}</span>
              <p class="card-text" id="detail-text" style="margin:5px 0 5px 5px; ">{{intro.tag}}</p>
              <i class="fa fa-heart fa-1x" style="color:#ed2553;"></i>
              <span id="detail-text">{{ intro.intro_like_users.count }}</span>
            </div>
          </div>
        </div>
      </a>

      {% endfor %}
    </div>
  </div>
</div>

<script type="text/javascript" src="{% static 'js/kakao_link.js' %}"></script>
<script>
function sendLink() {
  Kakao.Link.sendDefault({
    objectType: 'feed',
    content: {
      title: '학과: {{intro_detail.dename}}',
      description: '소개: {{ intro_detail.tag }}',
      imageUrl: 'http://kpufestival.waytech.kr/{{ intro_detail.img1.url }}/',
      link: {
        mobileWebUrl: 'http://kpufestival.waytech.kr/intro/intro_detail/{{ intro_detail.id }}/',
        webUrl: 'http://kpufestival.waytech.kr/intro/intro_detail/{{ intro_detail.id }}/',
      }
    },
  });
}
</script>

{% endblock %}